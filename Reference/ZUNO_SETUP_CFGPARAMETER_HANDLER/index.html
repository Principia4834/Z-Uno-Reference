<h1>ZUNO_SETUP_CFGPARAMETER_HANDLER()</h1>
<span class="function_description">
Z-Uno can be configured using standard Z-Wave Configuration feature. A Z-Wave controller can push parameter values to Z-Uno to tune Z-Uno behavior without changing Z-Uno sketch.
<br/><br/>
This macro defines the handler to be called on Configuration parameter change.
<br/><br/>
Z-Uno supports up to 32 configurable parameters.
</span>

<span class="function_syntax">
    ZUNO_SETUP_CFGPARAMETER_HANDLER(config_parameter_changed)
</span>

<span class="function_parameters">
    <span class="function_parameters_param">
        <span class="function_parameters_param_name">config_parameter_changed</span>
        <span class="function_parameters_param_description">Function to be called on parameters changed from the Z-Wave network. Function prototype is:
            <br/>
            <code zunoVersion="v1">void config_parameter_changed(byte param, word value)</code>
            <code zunoVersion="v2">void config_parameter_changed(uint8_t param, uint32_t value)</code>
            <br/>
            param is the parameter number.
            <br/>
            <span zunoVersion="v1"> value is the new value in 2-bytes representation  </span>
            <span zunoVersion="v2"> value is the new value in 4-bytes representation  </span>
            
        </span>
    </span>
</span>

<span class="function_description_more">
Configuration parameters are automatically saved to the EEPROM. You can get them from the EEPROM at any time (even after reboot) using zunoLoadCFGParam(param) or save (to be reported back to the controller upon request) using zunoSaveCFGParam(param, value)
</span>

<span class="function_syntax" zunoVersion="v1">
    word value = zunoLoadCFGParam(byte param);
</span>
<span class="function_syntax" zunoVersion="v2">
    uint32_t value = zunoLoadCFGParam(byte param);
</span>

<span class="function_parameters">
    <span class="function_parameters_param">
        <span class="function_parameters_param_name">param</span>
        <span class="function_parameters_param_description">Number of the parameter to be loaded from the EEPROM (starts from 64)</code>
        </span>
    </span>
</span>

<span class="function_syntax" zunoVersion="v1">
    zunoSaveCFGParam(byte param, word value);
</span>
<span class="function_syntax" zunoVersion="v2">
    zunoSaveCFGParam(uint8_t param, uint32_t value);
</span>

<span class="function_parameters">
    <span class="function_parameters_param">
        <span class="function_parameters_param_name">param</span>
        <span class="function_parameters_param_description">Number of the parameter to be saved to the EEPROM (starts from 64)</code>
        </span>
    </span>
    <span class="function_parameters_param">
        <span class="function_parameters_param_name">value</span>
        <span class="function_parameters_param_description" zunoVersion="v1">word variable to store</code>
        <span class="function_parameters_param_description" zunoVersion="v2">dword variable to store</code>
        </span>
    </span>
</span>

<span class="function_description_note">
Parameters on the Z-Wave controller side are numbered from 64 to 96.
</span>

<span class="function_description_note">
Note that Configuration parameters are signed values when defined in the Z-Wave controller.
</span>

<span class="function_description_note" zunoVersion="v1">
Since 2.1.5 zunoSaveCFGParam accepts and zunoLoadCFGParam returns a value instead of a pointer.
</span>

<span class="function_description_note" zunoVersion="v1">
Prior to version 2.1.4 parameters were 4 bytes (dword). Starting from 2.1.4 parameters are now two bytes (word).
</span>

<span class="function_example" zunoVersion="v1">
     <pre>
         <code class="c">word paramValue;

ZUNO_SETUP_CFGPARAMETER_HANDLER(config_parameter_changed);

word paramValue;

void setup() {
  paramValue = zunoLoadCFGParam(64);
}

void loop() {
  zunoSaveCFGParam(64, paramValue);
}

void config_parameter_changed(byte param, word value) {
    if (param == 64) { // The first user-defined parameter
      paramValue = value;
    }
}</code></pre>
 </span> 

 <span class="function_example" zunoVersion="v2">
    <pre>
        <code class="c">uint32_t paramValue;

ZUNO_SETUP_CFGPARAMETER_HANDLER(config_parameter_changed);

uint32_t paramValue;

void setup() {
 paramValue = zunoLoadCFGParam(64);
}

void loop() {
 zunoSaveCFGParam(64, paramValue);
}

void config_parameter_changed(uint8_t param, uint32_t value) {
   if (param == 64) { // The first user-defined parameter
     paramValue = value;
   }
}</code></pre>
</span> 

<span class="function_description_note">
    Configuration parameters values are stored in the <span class="function_ref">EEPROM</span>.
</span>

<span class="function_see_also">
    Get more information about <span class="function_ref">Z-Wave</span>.
</span>

<span zunoVersion="v2">
<span class="function_description_more">
	If you wish to include your parameters in <b>COMMAND_CLASS_CONFIGURATION</b> and thereby add their support to Zway. Then you must first fill in the structures describing your parameters.
</span>
<span class="function_description_more">
	And also add a function that will inform <b>COMMAND_CLASS_CONFIGURATION</b> about your configuration parameters.
</span>

<span class="function_example">
	An example of a correct addition to <b>COMMAND_CLASS_CONFIGURATION</b>:
	<pre>
		<code class="c">
static const ZunoCFGParameter_t lp_param[] =
{
	{//64 parameter
		.name = "Temperature hysteresis",//This field is used to advertise the name of the parameter
		.info = "Defines hysteresis of temperature reports in 10th of *C",//This field is used to advertise the detailed information available for the parameter.
		.minValue = 0x1,//The minimum value that the actual parameter can assume
		.maxValue = 0x14,//The maximum value that the actual parameter can assume.
		.defaultValue = 0x5,//The default value of the actual parameter
		.size = ZUNO_CFG_PARAMETER_SIZE_32BIT,//The size of the actual parameter;ZUNO_CFG_PARAMETER_SIZE_32BIT - 4 byte, ZUNO_CFG_PARAMETER_SIZE_16BIT - 2 byte, ZUNO_CFG_PARAMETER_SIZE_8BIT - 1 byte
		.format = ZUNO_CFG_PARAMETER_FORMAT_UNSIGNED,//The sign of the actual parameter;ZUNO_CFG_PARAMETER_FORMAT_UNSIGNED - unsigned, ZUNO_CFG_PARAMETER_FORMAT_SIGNED - signed
		.readOnly = false,// true - indicate that the advertised parameter is read-only, false - indicate that the advertised parameter is not read-only
		.altering = false//must false - while not used
	},
	{//65 parameter
		.name = "Humidity hysteresis",
		.info = "Defines hysteresis of temperature reports in 10th of %",
		.minValue = 0x1,
		.maxValue = 0x14,
		.defaultValue = 0x5,
		.size = ZUNO_CFG_PARAMETER_SIZE_32BIT,
		.format = ZUNO_CFG_PARAMETER_FORMAT_UNSIGNED,
		.readOnly = false,
		.altering = false
	},
	{//66 parameter
		.name = "Motion trigger time",
		.info = "Minimal time interval of the next motion sensor trigger",
		.minValue = 0x0,
		.maxValue = 0x5000,
		.defaultValue = 0x1000,
		.size = ZUNO_CFG_PARAMETER_SIZE_32BIT,
		.format = ZUNO_CFG_PARAMETER_FORMAT_UNSIGNED,
		.readOnly = false,
		.altering = false
	}
};


const ZunoCFGParameter_t *zunoCFGParameter(size_t param) {

	if (param < 64 || param > 66)//We check your parameter or not.
		return (ZUNO_CFG_PARAMETER_UNKNOWN);//If not ours, then we report it
	return (&lp_param[param - 64]);//Otherwise, we return a pointer to the parameter description.
}
		</code>
	</pre>
</span>

</span>

